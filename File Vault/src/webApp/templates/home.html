<!DOCTYPE html>
<html>
<head lang="en">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<title>Vault | by comvx</title>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
	<!-- Include our stylesheet -->
	<link href="/static/css/home.css" rel="stylesheet"/>
	<link href="/static/css/context-menu.css" rel="stylesheet"/>
	<link rel="icon" type="image/png" href="/static/images/shield_logo.png">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>
<body>
	<div class="filemanager">
		<div class="breadcrumbs">
			{% if current_folders|length > 1 %}
			<a class="upload" href="/upload?path={{ current_folder_path }}" style="z-index: 1;">
				<i class="fas fa-upload" style="font-size: 20px;margin-top: 20px;"></i>
			</a>
			{% endif %}
			<a class="upload logout" href="/logout">
				<i class="fas fa-sign-out-alt" style="font-size: 23px;margin-top: 18px; margin-left: -30px;"></i>
			</a>

			{% for i in range(0, current_folders|length) %}
			{% if current_folders[i] != "/" %}
			<a href="/home?path={% for index in range(i+1) %}{% if index > 1 %}{{ '/'+(current_folders[index]) }}{% else %}{{ (current_folders[index]) }}{% endif %}{% endfor %}">
				<span class="folderName">{{ current_folders[i] }}</span>
			</a>
			{% else %}
			<a href="/home?path=">
				<span class="folderName">{{ current_folders[i] }}</span>
			</a>
			{% endif %}
			{% if i < (current_folders|length)-1 %}
			<span class="arrow">â†’</span>
			{% endif %}
			{% endfor %}
		</div>
		<ul class="data animated" style="">
			<form method="POST">
				{{ home_add.hidden_tag() }}
				<li class="folders add_folder"><a class="folders"><span class="icon folder add"></span><span class="name">{{ home_add.folder_name_input(class="folder_name", autocomplete="off", autocorrect="off", placeholder="enter folder name") }}</span> <span class="details">{{ home_add.submit(class="btn btn-primary", type="submit") }}</span></a></li>
				{% if current_folders|length > 1  %}
				<li class="folders add_vault"><a class="folders"><span class="icon folder vault"></span><span class="name">{{ vault_add.vault_name(class="folder_name vault_name", id="vault_name", autocomplete="off", autocorrect="off", placeholder="enter vault name") }}{{ vault_add.vault_username(class="folder_name vault_username", id="vault_username", autocomplete="off", autocorrect="off", placeholder="enter username") }}{{ vault_add.vault_password(class="folder_name vault_password", id="vault_password", autocomplete="off", autocorrect="off", placeholder="enter password") }}</span> <span class="details">{{ vault_add.submit(class="btn btn-primary vault_submit", type="submit", id="vault_submit") }}<button class="btn btn-primary vault_next" id="vault_next" type="button" onclick="next_input()">next</button></span></a></li>
				{% endif %}
			</form>
			{% for index in range(data_set|length) %}
			{% if data_set[index].data == "" %}
			{% if data_set[index].child_items < 1 %}
			<li id={{ index }} class="folders">
				<a style="visibility: hidden;" id="{{ index }}_settings" class="settings"><button class="btn btn-primary" style="position: absolute;margin-left: 25px;" id="{{ index|string }}_rename_select" onclick="rename('{{ index|string }}')">rename</button><button class="btn btn-primary save_new_name" style="position: absolute;margin-left: 25px;visibility: hidden;" id="{{ index|string }}_rename_submit" onclick="rename_submit('{{ index|string }}', '{{ data_set[index].href }}', 'folder')" placeholder="enter new folder name" type="button">Save</button><button id="{{ index|string }}_delete" class="btn btn-primary" onclick="window.location.href='/delete?path={{ data_set[index].href }}&type={{ data_set[index].type }}'">delete</button><input id="{{ index|string }}_new_folder_name" style="visibility: hidden;background-color: rgb(30 30 30 / 1);" class="folder_name new_folder_name"></a>
				<a style="visibility: visible;" id="{{ index }}_info" href="/home?path={{ data_set[index].href }}" title="{{ data_set[index].href }}" class="folders"><span class="icon folder"></span><span class="name">{{ data_set[index].name }}</span> <span class="details">{{ data_set[index].child_items }} Items</span></a>
				<a class="delete_href" onclick="settings_show('{{ index|string }}')"></a>
			</li>
			<!--href="/delete?path={{ data_set[index].href }}&type={{ data_set[index].type }}"-->
			{% else %}
			<li class="folders">
				<a style="visibility: hidden;" id="{{ index }}_settings" class="settings"><button class="btn btn-primary" style="position: absolute;margin-left: 25px;" id="{{ index|string }}_rename_select" onclick="rename('{{ index|string }}')">rename</button><button class="btn btn-primary save_new_name" style="position: absolute;margin-left: 25px;visibility: hidden;" id="{{ index|string }}_rename_submit" onclick="rename_submit('{{ index|string }}', '{{ data_set[index].href }}', 'folder')" placeholder="enter new folder name" type="button">Save</button><button id="{{ index|string }}_delete" class="btn btn-primary" onclick="window.location.href='/delete?path={{ data_set[index].href }}&type={{ data_set[index].type }}'">delete</button><input id="{{ index|string }}_new_folder_name" style="visibility: hidden;background-color: rgb(30 30 30 / 1);" class="folder_name new_folder_name"></a>
				<a href="/home?path={{ data_set[index].href }}" id="{{ index }}_info" title="{{ data_set[index].href }}" class="folders"><span class="icon folder full"></span><span class="name">{{ data_set[index].name }}</span> <span class="details">{{ data_set[index].child_items }} Items</span></a>
				<a class="delete_href" onclick="settings_show('{{ index|string }}')"></a>
			</li>
			{% endif %}
			{% elif data_set[index].type == "vault" %}
			<li class="folders">
				<a style="visibility: hidden;" id="{{ index }}_settings" class="settings"><button class="share" onclick="window.location.href='/share?a=create&file_path={{ data_set[index].href }}&file_type=vault'"></button><button class="btn btn-primary" style="position: absolute;margin-left: 25px;" id="{{ index|string }}_rename_select" onclick="rename('{{ index|string }}')">rename</button><button class="btn btn-primary save_new_name" style="position: absolute;margin-left: 25px;visibility: hidden;" id="{{ index|string }}_rename_submit" onclick="rename_submit('{{ index|string }}', '{{ data_set[index].href }}', 'vault')" placeholder="enter new folder name" type="button">Save</button><button id="{{ index|string }}_delete" class="btn btn-primary" onclick="window.location.href='/delete?path={{ data_set[index].href }}&type={{ data_set[index].type }}'">delete</button><input id="{{ index|string }}_new_folder_name" style="visibility: hidden;background-color: rgb(30 30 30 / 1);" class="folder_name new_folder_name"></a>
				<a  href="/open?path={{ data_set[index].path }}&name={{ data_set[index].enc_name }}&type=vault" id="{{ index }}_info" title="{{ data_set[index].href }}" class="folders"><span class="icon folder vault vault_item"></span><span class="name">{{ data_set[index].name }}</span> <span class="details">Account Vault</span></a>
				<a class="delete_href" onclick="settings_show('{{ index|string }}')"></a>
			</li>
			{% else %}
			<li class="files">
				<a style="visibility: hidden;" id="{{ index }}_settings" class="settings"><button onclick="window.location.href='/download?file={{ data_set[index].href }}'" class="fa fa-download download" aria-hidden="true"></button><button class="share" onclick="window.location.href='/share?a=create&file_path={{ data_set[index].href }}&file_type=file'"></button><button class="btn btn-primary" style="position: absolute;margin-left: 25px;" id="{{ index|string }}_rename_select" onclick="rename('{{ index|string }}')">rename</button><button class="btn btn-primary save_new_name" style="position: absolute;margin-left: 25px;visibility: hidden;" id="{{ index|string }}_rename_submit" onclick="rename_submit('{{ index|string }}', '{{ data_set[index].href }}', 'file')" placeholder="enter new folder name" type="button">Save</button><button id="{{ index|string }}_delete" class="btn btn-primary" onclick="window.location.href='/delete?path={{ data_set[index].href }}&type={{ data_set[index].type }}'">delete</button><input id="{{ index|string }}_new_folder_name" style="visibility: hidden;background-color: rgb(30 30 30 / 1);" class="folder_name new_folder_name"></a>
				<a href="/open?path={{ data_set[index].path }}&name={{ data_set[index].enc_name }}&type={{ data_set[index].type }}" id="{{ index }}_info" title="{{ data_set[index].href }}" class="files"><span class="icon file f-{{ data_set[index].type }}">.{{ data_set[index].type }}</span><span class="name">{{ data_set[index].name }}</span> <span class="details">{{ ((data_set[index].data|length/1000000)|string)[:5] }} Megabytes</span></a>
				<a class="delete_href" onclick="settings_show('{{ index|string }}')"></a>
			</li>
			{% endif %}
			{% endfor %}
		</ul>
		{% with message = get_flashed_messages() %}
		{% if message %}
		<div class="alert success-alert">
			<button data-clipboard-text="{{ ((message|string).replace("['", "").replace("']", "")) }}" id="click_share_url" class="click_share_url" style="visibility: hidden;position: absolute;left: -999999999999999999%;"></button>
			<a id="message">{{ ((message|string).replace("['", "").replace("']", "")) }}</a>
			<a class="close">&times;</a>
		  </div>
		{% endif %}
		{% endwith %}
		<div class="nothingfound" style="display: {{ nothingfound }};">
			<div class="nofiles"></div>
			<span>No data here.</span>
		</div>

	</div>

	<!-- Include our script files -->
	<script src="/static/js/home.js"></script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
	<script src="https://kit.fontawesome.com/98889b1ced.js" crossorigin="anonymous"></script>
	<script src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js'></script>
	<script src="/static/js/clipboard.min.js"></script>
</body>
</html>